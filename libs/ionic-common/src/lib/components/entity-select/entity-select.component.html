<div [formGroup]="formGroup">
  <div *ngIf="formGroupNameKey; else noFormGroupName" [formGroupName]="formGroupNameKey">
    <div *ngIf="entities$ | async as entities">
      <ion-item *ngIf="entities">
        <ion-label position="stacked">{{label}}</ion-label>
        <ion-select [formControlName]="fieldName" placeholder="Select one" interface="action-sheet">
          <ion-select-option *ngFor="let entity of entities"
                             [value]="entity[valueKey]">{{entity[labelKey]}}</ion-select-option>
        </ion-select>
      </ion-item>
    </div>
  </div>
  <ng-template #noFormGroupName>
    <div *ngIf="entities$ | async as entities">
      <ion-item *ngIf="entities">
        <ion-label position="stacked">{{label}}</ion-label>
        <ion-select [formControlName]="fieldName" placeholder="Select one" interface="action-sheet">
          <ion-select-option *ngFor="let entity of entities"
                             [value]="entity[valueKey]">{{entity[labelKey]}}</ion-select-option>
        </ion-select>
      </ion-item>
    </div>
  </ng-template>
</div>
